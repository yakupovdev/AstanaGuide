<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>AG Sights</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        (function () {
            try {
                const storedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = storedTheme || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (error) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/header_style.css">
    <link rel="stylesheet" href="styles/footer_style.css">
    <link rel="stylesheet" href="styles/sights_style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <link rel="icon" type="image/png" href="images/icon.png">
</head>
<body>
<header class="header shadow-sm">
    <div class="container d-flex flex-wrap justify-content-between align-items-center py-3">
        <a href="index.html" class="logo d-flex align-items-center text-decoration-none">
            <img class="logo-img me-2" src="images/icon.png" alt="Logo">
            <span class="logo-text fw-bold">Astana Guide</span>
        </a>
        <nav class="nav d-flex align-items-center">
            <ul class="nav list-unstyled d-flex mb-0 me-3">
                <li><a href="index.html" class="nav-link px-3">Home</a></li>
                <li><a href="sights.html" class="nav-link active px-3">Sights</a></li>
                <li><a href="events.html" class="nav-link px-3">Events</a></li>
                <li><a href="about.html" class="nav-link px-3">About Us</a></li>
            </ul>
            <button id="theme-toggle" class="theme-toggle-btn">
                <i class="fas fa-moon"></i>
            </button>
        </nav>
    </div>
</header>

<section class="scroll-section container mt-4">
    <h2 class="text-center">Popular Sights</h2>
    <div class="row justify-content-center">
        <div class="col-lg-10 col-md-12">
            <div class="sight-view">
                <div id="bayterek" class="sight-content active" data-lat="51.128212" data-lng="71.430411"
                     data-zoom="16">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/sights_baiterek.jpg" alt="Bayterek Tower" class="img-fluid">
                        <h3>Bayterek Tower</h3>
                        <p>Bayterek is the main attraction and symbol of Astana, reflecting the ideas of independence
                            and development of Kazakhstan. The tower rises to a height of 97 meters, symbolizing the
                            year when the capital was moved to Astana. At the top, there is an observation deck with a
                            panoramic view of the entire city.</p>
                    </div>
                    <div class="sight-map" id="map-bayterek"></div>
                </div>

                <div id="khan-shatyr" class="sight-content" data-lat="51.132316" data-lng="71.403626" data-zoom="16">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/sights_khan_shatyr1.jpg" alt="Khan Shatyr" class="img-fluid">
                        <h3>Khan Shatyr</h3>
                        <p>Khan Shatyr is one of the most recognizable symbols of modern Astana and the world's largest
                            tent, designed by renowned architect Norman Foster. Inside Khan Shatyr is a shopping and
                            entertainment center with dozens of shops, restaurants, cinemas, and recreation areas.</p>
                    </div>
                    <div class="sight-map" id="map-khan-shatyr"></div>
                </div>

                <div id="hazret-sultan" class="sight-content" data-lat="51.1258" data-lng="71.47241" data-zoom="16">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/hazrat_sultan_mosque.png" alt="Hazret Sultan Mosque"
                             class="img-fluid">
                        <h3>Hazret Sultan Mosque</h3>
                        <p>The Hazret Sultan Mosque is one of the largest mosques in Central Asia and a magnificent
                            example of modern Islamic architecture. The mosque can accommodate up to 10,000 worshippers
                            and features beautiful traditional Islamic design elements combined with contemporary
                            architectural solutions.</p>
                    </div>
                    <div class="sight-map" id="map-hazret-sultan"></div>
                </div>

                <div id="akorda" class="sight-content" data-lat="51.12609" data-lng="71.44634" data-zoom="16">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/ak_orda.png" alt="Akorda Palace" class="img-fluid">
                        <h3>Akorda Palace</h3>
                        <p>The Akorda Presidential Palace is the official workplace of the President of Kazakhstan. This
                            impressive building with its distinctive blue dome is one of the most recognizable symbols
                            of the capital, representing the state power and sovereignty of Kazakhstan.</p>
                    </div>
                    <div class="sight-map" id="map-akorda"></div>
                </div>

                <div id="nur-astana" class="sight-content" data-lat="51.0728" data-lng="71.40974" data-zoom="16">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/nur_astana_mosque.png" alt="Nur-Astana Mosque" class="img-fluid">
                        <h3>Nur-Astana Mosque</h3>
                        <p>The Nur-Astana Mosque is another significant religious landmark in Astana, known for its
                            elegant architecture and peaceful atmosphere. The mosque serves as an important spiritual
                            center for the Muslim community and showcases beautiful traditional Islamic architectural
                            elements.</p>
                    </div>
                    <div class="sight-map" id="map-nur-astana"></div>
                </div>

                <div id="expo" class="sight-content" data-lat="51.08947" data-lng="71.41595" data-zoom="15">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/expo.jpg" alt="Expo2017" class="img-fluid">
                        <h3>Expo 2017</h3>
                        <p>Expo 2017 was a major international exhibition held in Astana, dedicated to the theme "Future
                            Energy." Its centerpiece, the Nur Alem pavilion, is the world's largest spherical building
                            and has become one of the city's most iconic landmarks. Today, the area serves as a
                            cultural, scientific, and business hub with museums, exhibitions, and modern
                            architecture.</p>
                    </div>
                    <div class="sight-map" id="map-expo"></div>
                </div>

                <div id="square" class="sight-content" data-lat="51.12213" data-lng="71.46986" data-zoom="15">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/independence_square.jpg" alt="Independence Square"
                             class="img-fluid">
                        <h3>Independence Square</h3>
                        <p>Independence Square is one of the largest squares in Astana and a significant cultural and
                            ceremonial space. It hosts national celebrations, military parades, and major public events.
                            The square is surrounded by important landmarks such as the Palace of Independence, the
                            National Museum, and the grand Hazrat Sultan Mosque.</p>
                    </div>
                    <div class="sight-map" id="map-square"></div>
                </div>

                <div id="park" class="sight-content" data-lat="51.15557" data-lng="71.41798" data-zoom="15">
                    <div class="sight-tabs">
                        <button class="sight-tab active" data-view="info"><img src="images/sights_images/info.png"
                                                                               class="icon">Info
                        </button>
                        <button class="sight-tab" data-view="map"><img src="images/sights_images/map.png" class="icon">Map
                        </button>
                    </div>
                    <div class="sight-info active">
                        <img src="images/sights_images/central_park_astana.webp" alt="Astana Central Park"
                             class="img-fluid">
                        <h3>Astana Central Park</h3>
                        <p>Astana Central Park is a green oasis in the heart of the city, popular among locals and
                            visitors alike. It offers walking paths, lakes, playgrounds, and amusement rides, making it
                            a favorite spot for families and outdoor activities. The park provides a relaxing escape
                            from the modern urban landscape of the capital.</p>
                    </div>
                    <div class="sight-map" id="map-park"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="scroll-container">
                <div class="scroll-item active" data-target="bayterek">
                    <img src="images/sights_images/sights_baiterek.jpg" alt="Bayterek Tower">
                    <p>Bayterek Tower</p>
                </div>
                <div class="scroll-item" data-target="khan-shatyr">
                    <img src="images/sights_images/sights_khan_shatyr1.jpg" alt="Khan Shatyr">
                    <p>Khan Shatyr</p>
                </div>
                <div class="scroll-item" data-target="hazret-sultan">
                    <img src="images/sights_images/hazrat_sultan_mosque.png" alt="Hazret Sultan Mosque">
                    <p>Hazret Sultan Mosque</p>
                </div>
                <div class="scroll-item" data-target="akorda">
                    <img src="images/sights_images/ak_orda.png" alt="Akorda Palace">
                    <p>Akorda Palace</p>
                </div>
                <div class="scroll-item" data-target="nur-astana">
                    <img src="images/sights_images/nur_astana_mosque.png" alt="Nur-Astana Mosque">
                    <p>Nur-Astana Mosque</p>
                </div>
                <div class="scroll-item" data-target="expo">
                    <img src="images/sights_images/expo.jpg" alt="Expo 2017">
                    <p>Expo 2017</p>
                </div>
                <div class="scroll-item" data-target="square">
                    <img src="images/sights_images/independence_square.jpg" alt="Independence Square">
                    <p>Independence Square</p>
                </div>
                <div class="scroll-item" data-target="park">
                    <img src="images/sights_images/central_park_astana.webp" alt="Astana Central Park">
                    <p>Astana Central Park</p>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer mt-auto">
    <div class="container text-center">
        <p>© 2025 Astana Guide. All Rights Reserved.
            © by Marlen Zhumagulov
        </p>
        <div class="footer-contacts">
            <a href="contact.html">Contact Us</a>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const scrollItems = document.querySelectorAll('.scroll-item');
    const sightContents = document.querySelectorAll('.sight-content');
    const mapInstances = {};
    const infoImages = document.querySelectorAll('.sight-info img.img-fluid');
    const IMAGE_VISIBLE_TEXT = 'Image visible';
    const IMAGE_HIDDEN_TEXT = 'Image hidden';

    const sightVariants = {

        'bayterek': {
            images: [
                {src: 'images/sights_images/sights_baiterek.jpg', alt: 'View of Bayterek Tower at sunset'},
                {src: 'https://www.tourstouzbekistan.com/uploads/blog/Astana-Baiterek2.jpg', alt: 'Downtown Astana skyline at night'}
            ],
            links: [
                {href: '#map-bayterek', label: 'Bayterek map view'},
                {href: 'https://en.wikipedia.org/wiki/Baiterek', label: 'Read about Bayterek'}
            ]
        },
        'khan-shatyr': {
            images: [
                {src: 'images/sights_images/sights_khan_shatyr1.jpg', alt: 'Khan Shatyr exterior at dusk'},
                {src: 'images/sights_images/sights_khan_shatyr.jpg', alt: 'Khan Shatyr interior dome'}
            ],
            links: [
                {href: '#map-khan-shatyr', label: 'Khan Shatyr map view'},
                {href: 'https://en.wikipedia.org/wiki/Khan_Shatyr_Entertainment_Center', label: 'Discover Khan Shatyr'}
            ]
        },
        'hazret-sultan': {
            images: [
                {src: 'images/sights_images/hazrat_sultan_mosque.png', alt: 'Hazret Sultan Mosque from the front'},
                {src: 'https://astana.citypass.kz/wp-content/uploads/MxOCyZ.jpg', alt: 'Golden domes near the Ishim River'}
            ],
            links: [
                {href: '#map-hazret-sultan', label: 'Hazret Sultan map view'},
                {href: 'https://en.wikipedia.org/wiki/Hazret_Sultan_Mosque', label: 'Hazret Sultan details'}
            ]
        },
        'akorda': {
            images: [
                {src: 'images/sights_images/ak_orda.png', alt: 'Akorda Presidential Palace facade'},
                {src: 'https://upload.wikimedia.org/wikivoyage/ru/f/f2/Ak_Orda_Presidential_Palace_by_night_05.jpg', alt: 'View across Independence Square'}
            ],
            links: [
                {href: '#map-akorda', label: 'Akorda map view'},
                {href: 'https://en.wikipedia.org/wiki/Ak_Orda_Presidential_Palace', label: 'Learn about Akorda'}
            ]
        },
        'nur-astana': {
            images: [
                {src: 'images/sights_images/nur_astana_mosque.png', alt: 'Nur-Astana Mosque main entrance'},
                {src: 'https://media.istockphoto.com/id/1453247591/photo/panoramic-view-of-snow-white-modern-hazaret-sultan-mosque-at-night-nur-sultan-astana.jpg?s=612x612&w=0&k=20&c=as6DAC0KmDP7ggBUsDkuZ3NwUBSx6WpddhQm3YniCCk=', alt: 'Green promenade near Nur-Astana Mosque'}
            ],
            links: [
                {href: '#map-nur-astana', label: 'Nur-Astana map view'},
                {href: 'https://en.wikipedia.org/wiki/Nur-Astana_Mosque', label: 'Nur-Astana background'}
            ]
        },
        'expo': {
            images: [
                {src: 'images/sights_images/expo.jpg', alt: 'Nur Alem pavilion at EXPO 2017'},
                {src: 'https://www.dirtymonitor.com/projects/img/projets/595b89f2a5085-expo2017-astana-3d-projection-mappingvideo-futurenergy-dirtymonitor-slider7.jpg', alt: 'Astana Guide blueprint illustration'}
            ],
            links: [
                {href: '#map-expo', label: 'Visit EXPO map'},
                {href: 'https://en.wikipedia.org/wiki/Expo_2017', label: 'Expo 2017 history'}
            ]
        },
        'square': {
            images: [
                {src: 'images/sights_images/independence_square.jpg', alt: 'Independence Square fountains'},
                {src: 'https://www.shutterstock.com/image-photo/astana-kazakhstan-06202017-monument-kazakh-600nw-2621371465.jpg', alt: 'Akorda Palace from the square'}
            ],
            links: [
                {href: '#map-square', label: 'Independence Square map'},
                {href: 'https://en.wikipedia.org/wiki/Independence_Square_(Nur-Sultan)', label: 'Square highlights'}
            ]
        },
        'park': {
            images: [
                {src: 'images/sights_images/central_park_astana.webp', alt: 'Astana Central Park lake'},
                {src: 'https://ink-a.com/assets/components/phpthumbof/cache/%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B2%D1%8F%281%29.aa0fdfa69740d22a4e3cc983a4aaa0ed.webp', alt: 'Stylised outline of Astana attractions'}
            ],
            links: [
                {href: '#map-park', label: 'Explore park map'},
                {href: 'https://astana.gov.kz/en/page/central_park', label: 'Official park info'}
            ]
        }
    };

    function applyImageVariant(content, index) {
        const variants = sightVariants[content.id];
        if (!variants || !variants.images.length) {
            return;
        }
        const info = content.querySelector('.sight-info');
        const image = info ? info.querySelector('img.img-fluid') : null;
        if (!image) {
            return;
        }
        const normalizedIndex = index % variants.images.length;
        const next = variants.images[normalizedIndex];
        image.src = next.src;
        image.alt = next.alt;
        content.dataset.imageIndex = String(normalizedIndex);
    }

    function applyLinkVariant(content, index) {
        const variants = sightVariants[content.id];
        if (!variants || !variants.links || !variants.links.length) {
            return;
        }
        const link = content.querySelector('.sight-info-link');
        if (!link) {
            return;
        }
        const normalizedIndex = index % variants.links.length;
        const next = variants.links[normalizedIndex];
        link.href = next.href;
        link.textContent = next.label;
        if (next.href.startsWith('#')) {
            link.removeAttribute('target');
            link.removeAttribute('rel');
        } else {
            link.target = '_blank';
            link.rel = 'noopener';
        }
        content.dataset.linkIndex = String(normalizedIndex);
    }

    function ensureMap(mapId, lat, lng, zoom) {
        if (mapInstances[mapId]) {
            setTimeout(() => mapInstances[mapId].invalidateSize(), 200);
            return;
        }
        const map = L.map(mapId).setView([lat, lng], zoom);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);
        L.marker([lat, lng]).addTo(map);
        mapInstances[mapId] = map;
        setTimeout(() => map.invalidateSize(), 250);
    }

    function resetSightContent(content) {
        const info = content.querySelector('.sight-info');
        const image = info ? info.querySelector('img.img-fluid') : null;
        const view = content.closest('.sight-view');

        content.classList.remove('sight-content-expanded');

        if (view) {
            view.classList.remove('sight-view-expanded');
        }

        if (info) {
            info.classList.remove('sight-info-collapsed', 'sight-info-expanded');
            info.querySelectorAll('h3, p').forEach(node => {
                node.hidden = false;
            });
        }

        if (image) {
            image.classList.remove('sight-image-expanded', 'sight-image-hidden');
        }

        const toggleInput = content.querySelector('.sight-toggle-input');
        const toggleStatus = content.querySelector('.sight-toggle-status');
        if (toggleInput) {
            toggleInput.checked = true;
        }
        if (toggleStatus) {
            toggleStatus.textContent = IMAGE_VISIBLE_TEXT;
        }
        if (sightVariants[content.id]) {
            content.dataset.imageIndex = '0';
            content.dataset.linkIndex = '0';
            applyImageVariant(content, 0);
            applyLinkVariant(content, 0);
        }
    }

    function setActiveView(content, view) {
        const tabs = content.querySelectorAll('.sight-tab');
        const info = content.querySelector('.sight-info');
        const map = content.querySelector('.sight-map');
        tabs.forEach(tab => tab.classList.toggle('active', tab.dataset.view === view));
        if (view === 'info') {
            info.classList.add('active');
            map.classList.remove('active');
            return;
        }
        resetSightContent(content);
        info.classList.remove('active');
        map.classList.add('active');
        const mapId = map.id;
        const lat = parseFloat(content.dataset.lat);
        const lng = parseFloat(content.dataset.lng);
        const zoom = parseInt(content.dataset.zoom || '15', 10);
        ensureMap(mapId, lat, lng, zoom);
    }

    function showSight(targetId, preventScroll = false) {
        sightContents.forEach(c => {
            resetSightContent(c);
            c.classList.remove('active');
        });
        scrollItems.forEach(i => i.classList.remove('active'));
        const targetContent = document.getElementById(targetId);
        if (targetContent) {
            targetContent.classList.add('active');
            setActiveView(targetContent, 'info');
        }
        const activeItem = document.querySelector(`[data-target="${targetId}"]`);
        if (activeItem) {
            activeItem.classList.add('active');
            if (!preventScroll) {
                activeItem.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'center'});
            }
        }
    }

    document.querySelectorAll('.sight-tab').forEach(tab => {
        tab.addEventListener('click', function (e) {
            e.preventDefault();
            const content = this.closest('.sight-content');
            const view = this.dataset.view;
            if (content) setActiveView(content, view);
        });
    });

    sightContents.forEach((content, index) => {
        const tabs = content.querySelector('.sight-tabs');
        const info = content.querySelector('.sight-info');
        const image = info ? info.querySelector('img.img-fluid') : null;
        if (!tabs || !image) {
            return;
        }

        if (content.querySelector('.sight-image-toggle')) {
            return;
        }

        const view = content.closest('.sight-view');
        const baseId = content.id || `sight-${index}`;
        const toggleId = `${baseId}-image-toggle`;
        const statusId = `${toggleId}-status`;

        const toggleWrapper = document.createElement('div');
        toggleWrapper.className = 'sight-image-toggle';
        toggleWrapper.innerHTML = `
            <span id="${statusId}" class="sight-toggle-status">${IMAGE_VISIBLE_TEXT}</span>
            <label class="sight-toggle-switch">
                <input type="checkbox" class="sight-toggle-input" id="${toggleId}" checked aria-describedby="${statusId}" aria-label="Toggle sight image visibility">
                <span class="sight-toggle-slider" aria-hidden="true"></span>
            </label>
        `;

        tabs.parentNode.insertBefore(toggleWrapper, tabs);

        const toggleInput = toggleWrapper.querySelector('.sight-toggle-input');
        const statusNode = toggleWrapper.querySelector('.sight-toggle-status');

        toggleInput.addEventListener('change', function () {
            if (this.checked) {
                image.classList.remove('sight-image-hidden');
                statusNode.textContent = IMAGE_VISIBLE_TEXT;
                return;
            }

            content.classList.remove('sight-content-expanded');
            if (view) {
                view.classList.remove('sight-view-expanded');
            }
            if (info) {
                info.classList.remove('sight-info-collapsed', 'sight-info-expanded');
                info.querySelectorAll('h3, p').forEach(node => {
                    node.hidden = false;
                });
            }
            image.classList.remove('sight-image-expanded');
            image.classList.add('sight-image-hidden');
            statusNode.textContent = IMAGE_HIDDEN_TEXT;
        });

        const actions = document.createElement('div');
        actions.className = 'sight-info-actions';

        const imageBtn = document.createElement('button');
        imageBtn.type = 'button';
        imageBtn.className = 'btn btn-outline-primary sight-cycle-image';
        imageBtn.textContent = 'Change Image';

        const linkBtn = document.createElement('button');
        linkBtn.type = 'button';
        linkBtn.className = 'btn btn-outline-secondary sight-cycle-link';
        linkBtn.textContent = 'Change Link';

        const linkAction = document.createElement('a');
        linkAction.className = 'btn btn-primary sight-info-link';
        linkAction.href = '#';

        actions.appendChild(imageBtn);
        actions.appendChild(linkBtn);
        actions.appendChild(linkAction);
        info.appendChild(actions);

        content.dataset.imageIndex = '0';
        content.dataset.linkIndex = '0';
        applyImageVariant(content, 0);
        applyLinkVariant(content, 0);

        imageBtn.addEventListener('click', function () {
            if (!sightVariants[content.id] || !sightVariants[content.id].images.length) {
                return;
            }
            const nextIndex = (parseInt(content.dataset.imageIndex || '0', 10) + 1) % sightVariants[content.id].images.length;
            applyImageVariant(content, nextIndex);
        });

        linkBtn.addEventListener('click', function () {
            if (!sightVariants[content.id] || !sightVariants[content.id].links || !sightVariants[content.id].links.length) {
                return;
            }
            const nextIndex = (parseInt(content.dataset.linkIndex || '0', 10) + 1) % sightVariants[content.id].links.length;
            applyLinkVariant(content, nextIndex);
        });

        linkAction.addEventListener('click', function (event) {
            const href = this.getAttribute('href') || '#';
            if (!href.startsWith('#')) {
                return;
            }
            event.preventDefault();
            setActiveView(content, 'map');
            const targetId = href.substring(1);
            if (targetId) {
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({behavior: 'smooth', block: 'center'});
                }
            }
        });
    });

    infoImages.forEach(image => {
        image.addEventListener('click', function () {
            const info = this.closest('.sight-info');
            if (!info) {
                return;
            }
            const content = info.closest('.sight-content');
            const view = content ? content.closest('.sight-view') : null;
            const textBlocks = info.querySelectorAll('h3, p');
            const expand = !this.classList.contains('sight-image-expanded');

            if (expand) {
                this.classList.add('sight-image-expanded');
                info.classList.add('sight-info-collapsed', 'sight-info-expanded');
                textBlocks.forEach(node => {
                    node.hidden = true;
                });
                if (content) {
                    content.classList.add('sight-content-expanded');
                }
                if (view) {
                    view.classList.add('sight-view-expanded');
                }
                return;
            }

            this.classList.remove('sight-image-expanded');
            info.classList.remove('sight-info-collapsed', 'sight-info-expanded');
            textBlocks.forEach(node => {
                node.hidden = false;
            });
            if (content) {
                content.classList.remove('sight-content-expanded');
            }
            if (view) {
                view.classList.remove('sight-view-expanded');
            }
            const statusNode = content ? content.querySelector('.sight-toggle-status') : null;
            const toggleInput = content ? content.querySelector('.sight-toggle-input') : null;
            if (toggleInput) {
                toggleInput.checked = true;
            }
            if (statusNode) {
                statusNode.textContent = IMAGE_VISIBLE_TEXT;
            }
        });
    });

    scrollItems.forEach(item => {
        item.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('data-target');
            const scrollPos = window.scrollY;
            showSight(targetId);
            history.pushState(null, '', '#' + targetId);
            window.scrollTo(0, scrollPos);
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        const hash = window.location.hash.substring(1);
        if (hash && document.getElementById(hash)) {
            showSight(hash, true);
        } else {
            showSight('bayterek', true);
        }
    });

    window.addEventListener('hashchange', function () {
        const hash = window.location.hash.substring(1);
        if (hash && document.getElementById(hash)) showSight(hash, true);
    });

</script>

<script src="scripts/theme.js"></script>
</body>
</html>